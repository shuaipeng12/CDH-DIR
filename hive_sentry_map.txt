DBS
+-------+-----------------------+----------------------------------------------------+---------+------------+------------+-------------+
| DB_ID | DESC                  | DB_LOCATION_URI                                    | NAME    | OWNER_NAME | OWNER_TYPE | CREATE_TIME |
+-------+-----------------------+----------------------------------------------------+---------+------------+------------+-------------+
|     1 | Default Hive database | hdfs://hadoop01.macro.com:8020/user/hive/warehouse | default | public     | ROLE       |  1689080025 |
+-------+-----------------------+----------------------------------------------------+---------+------------+------------+-------------+

GLOBAL_PRIVS
+---------------+-------------+--------------+---------+--------------+----------------+----------------+-----------+
| USER_GRANT_ID | CREATE_TIME | GRANT_OPTION | GRANTOR | GRANTOR_TYPE | PRINCIPAL_NAME | PRINCIPAL_TYPE | USER_PRIV |
+---------------+-------------+--------------+---------+--------------+----------------+----------------+-----------+
|             1 |  1689080025 |            1 | admin   | ROLE         | admin          | ROLE           | All       |
+---------------+-------------+--------------+---------+--------------+----------------+----------------+-----------+

ROLES
+---------+-------------+------------+-----------+
| ROLE_ID | CREATE_TIME | OWNER_NAME | ROLE_NAME |
+---------+-------------+------------+-----------+
|       1 |  1689080025 | admin      | admin     |
|       2 |  1689080025 | public     | public    |
+---------+-------------+------------+-----------+


TBL_PRIVS
+--------------+-------------+--------------+-----------+--------------+----------------+----------------+----------+--------+
| TBL_GRANT_ID | CREATE_TIME | GRANT_OPTION | GRANTOR   | GRANTOR_TYPE | PRINCIPAL_NAME | PRINCIPAL_TYPE | TBL_PRIV | TBL_ID |
+--------------+-------------+--------------+-----------+--------------+----------------+----------------+----------+--------+
|            1 |  1692101427 |            1 | shuaipeng | USER         | shuaipeng      | USER           | INSERT   |  10081 |
|            2 |  1692101427 |            1 | shuaipeng | USER         | shuaipeng      | USER           | SELECT   |  10081 |
|            3 |  1692101427 |            1 | shuaipeng | USER         | shuaipeng      | USER           | UPDATE   |  10081 |
|            4 |  1692101427 |            1 | shuaipeng | USER         | shuaipeng      | USER           | DELETE   |  10081 |
+--------------+-------------+--------------+-----------+--------------+----------------+----------------+----------+--------+

TBLS
+--------+-------------+-------+------------------+-----------+------------+-----------+-------+----------+---------------+--------------------+--------------------+
| TBL_ID | CREATE_TIME | DB_ID | LAST_ACCESS_TIME | OWNER     | OWNER_TYPE | RETENTION | SD_ID | TBL_NAME | TBL_TYPE      | VIEW_EXPANDED_TEXT | VIEW_ORIGINAL_TEXT |
+--------+-------------+-------+------------------+-----------+------------+-----------+-------+----------+---------------+--------------------+--------------------+
|  10081 |  1692101427 |     1 |                0 | shuaipeng | USER       |         0 | 30156 | test     | MANAGED_TABLE | NULL               | NULL               |
+--------+-------------+-------+------------------+-----------+------------+-----------+-------+----------+---------------+--------------------+--------------------+

SENTRY_ROLE
+---------+-----------+---------------+
| ROLE_ID | ROLE_NAME | CREATE_TIME   |
+---------+-----------+---------------+
|       1 | admin     | 1692103776814 |
+---------+-----------+---------------+


SENTRY_DB_PRIVILEGE
+-----------------+-----------------+-------------+----------+------------+-------------+----------+--------+---------------+-------------------+
| DB_PRIVILEGE_ID | PRIVILEGE_SCOPE | SERVER_NAME | DB_NAME  | TABLE_NAME | COLUMN_NAME | URI      | ACTION | CREATE_TIME   | WITH_GRANT_OPTION |
+-----------------+-----------------+-------------+----------+------------+-------------+----------+--------+---------------+-------------------+
|               1 | SERVER          | server1     | __NULL__ | __NULL__   | __NULL__    | __NULL__ | *      | 1692103793910 | N                 |
+-----------------+-----------------+-------------+----------+------------+-------------+----------+--------+---------------+-------------------+


SENTRY_GROUP
+----------+------------+---------------+
| GROUP_ID | GROUP_NAME | CREATE_TIME   |
+----------+------------+---------------+
|        1 | hive       | 1692103809605 |
+----------+------------+---------------+


SENTRY_ROLE_DB_PRIVILEGE_MAP
+---------+-----------------+-------------------+
| ROLE_ID | DB_PRIVILEGE_ID | GRANTOR_PRINCIPAL |
+---------+-----------------+-------------------+
|       1 |               1 | NULL              |
+---------+-----------------+-------------------+


SENTRY_ROLE_GROUP_MAP
+---------+----------+-------------------+
| ROLE_ID | GROUP_ID | GRANTOR_PRINCIPAL |
+---------+----------+-------------------+
|       1 |        1 | NULL              |
+---------+----------+-------------------+

SENTRY_ROLE_USER_MAP
SENTRY_USER
SENTRY_USER_DB_PRIVILEGE_MAP


库名，表名，角色，用户组，用户，权限

select a.NAME as DB_NAME,b.TBL_NAME,b.RETENTION,b.OWNER,b.OWNER_TYPE,a.OWNER_TYPE,r.ROLE_NAME,t.GRANTOR,t.GRANTOR_TYPE,t.TBL_PRIV from DBS as a left JOIN TBLS as b on a.DB_ID=b.DB_ID left JOIN ROLES as r on r.OWNER_NAME=a.OWNER_NAME left JOIN TBL_PRIVS as t on t.TBL_ID=b.TBL_ID;